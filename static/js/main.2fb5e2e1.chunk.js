(this["webpackJsonpqr-reader-react"]=this["webpackJsonpqr-reader-react"]||[]).push([[0],{27:function(e,t,n){"use strict";n.r(t);var r,a,c,i=n(0),u=n.n(i),o=n(11),s=n.n(o),d=n(2),h=n(3),j=n(7),b=n.n(j),l=n(12),p=n(4),O=n(5),f=n(13),x=n.n(f),g=n(1),v=O.a.div(r||(r=Object(p.a)(["\n  position: relative;\n  width : ","px;\n  height: ","px;\n"])),(function(e){return e.width}),(function(e){return e.height})),w=O.a.video(a||(a=Object(p.a)(["\n  position: absolute; \n  z-index : -100;\n"]))),m=O.a.div(c||(c=Object(p.a)(["\n  position: absolute; \n  border: 1px solid #F00;\n  top   : ","px;\n  left  : ","px;\n  width : ","px;\n  height: ","px;\n"])),(function(e){return e.top}),(function(e){return e.left}),(function(e){return e.width}),(function(e){return e.height})),C=function(e){var t=Object(i.useState)({top:0,left:0,width:0,height:0}),n=Object(h.a)(t,2),r=n[0],a=n[1],c=Object(i.useRef)(null),u=Object(i.useRef)(null);return Object(i.useEffect)((function(){Object(l.a)(b.a.mark((function t(){var n,r,i,o,s,d;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.pause){t.next=5;break}return c.current.pause(),clearInterval(u.current),u.current=null,t.abrupt("return");case 5:return n=e.width,r=e.height,i={audio:!1,video:{facingMode:"environment",width:n,height:r}},t.next=9,navigator.mediaDevices.getUserMedia(i);case 9:return o=t.sent,c.current.srcObject=o,c.current.play(),s=new OffscreenCanvas(n,r),d=s.getContext("2d"),u.current||(u.current=setInterval((function(){d.drawImage(c.current,0,0,n,r);var t,i,u=d.getImageData(0,0,n,r),o=x()(u.data,u.width,u.height);o&&(console.log(o.data),e.showQRFrame&&(t=o.location.topLeftCorner,i=o.location.bottomRightCorner,a({top:t.y,left:t.x,width:i.x-t.x,height:i.y-t.y})),e.onRecognizeCode&&e.onRecognizeCode(o))}),e.timerInterval)),t.abrupt("return",(function(){return clearInterval(u.current)}));case 16:case"end":return t.stop()}}),t)})))()}),[e]),Object(g.jsxs)(v,Object(d.a)(Object(d.a)({},e),{},{children:[Object(g.jsx)(w,{ref:c}),Object(g.jsx)(m,Object(d.a)({},r))]}))};C.defaultProps={width:500,height:500,pause:!1,showQRFrame:!0,timerInterval:300};var R=C;var I=function(){var e=u.a.useState(!0),t=Object(h.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)({width:500,height:500,pause:!0}),c=Object(h.a)(a,2),o=c[0],s=c[1],j=Object(i.useState)(""),b=Object(h.a)(j,2),l=b[0],p=b[1];return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(R,Object(d.a)(Object(d.a)({},o),{},{onRecognizeCode:function(e){p(e.data),n&&s((function(e){return Object(d.a)(Object(d.a)({},e),{},{pause:!0})}))}})),Object(g.jsxs)("div",{children:[Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"radio",name:"rdo",value:"0",onChange:function(e){return r("0"===e.target.value)},checked:n}),"\u8a8d\u8b58\u6642\u306b\u81ea\u52d5\u505c\u6b62"]}),Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"radio",name:"rdo",value:"1",onChange:function(e){return r("0"===e.target.value)},checked:!n}),"\u8a8d\u8b58\u6642\u3082\u51e6\u7406\u7d99\u7d9a"]}),Object(g.jsx)("button",{onClick:function(){s((function(e){return Object(d.a)(Object(d.a)({},e),{},{pause:!e.pause})}))},children:o.pause?"\u518d\u958b":"\u505c\u6b62"}),Object(g.jsxs)("p",{children:["QR\u30b3\u30fc\u30c9\uff1a",l]})]})]})};s.a.render(Object(g.jsx)(u.a.StrictMode,{children:Object(g.jsx)(I,{})}),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.2fb5e2e1.chunk.js.map